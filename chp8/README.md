# Week 8 Homework

1. 使用 redis benchmark 工具, 测试 10 20 50 100 200 1k 5k 字节 value 大小，redis get set 性能。

```shell
redis-benchmark -n 100000 -q -t get,set -d 10
```

| value size | get/s  | set/s  |
| ---------- | ------ | ------ |
| 10         | 141442 | 134228 |
| 20         | 143061 | 129701 |
| 50         | 119474 | 114155 |
| 100        | 160256 | 136054 |
| 200        | 140056 | 129032 |
| 1024       | 147492 | 125156 |
| 5120       | 121212 | 136798 |
| 10k        | 122249 | 124688 |
| 50k        | 60496  | 100401 |

10k size 后性能开始下滑。

2. 写入一定量的 kv 数据, 根据数据大小 1w-50w 自己评估, 结合写入前后的 info memory 信息 , 分析上述不同 value 大小下，平均每个 key 的占用内存空间。

```shell
redis-benchmark -n 100000 -r 100000 -q -t set -d 10
redis-cli flushall
```

| value size | used_memory | used_memory_rss | size/key |
| ---------- | ----------- | --------------- | -------- |
| 10         | 7.35M       | 69.31M          | 74       |
| 20         | 8.29M       | 72.61M          | 83       |
| 50         | 10.23M      | 77.48M          | 100      |
| 100        | 13.11M      | 84.78M          | 131      |
| 200        | 18.92M      | 69.06M          | 189      |
| 1024       | 99.00M      | 163.58M         | 990      |
| 5120       | 346.10M     | 406.83M         | 3460     |
